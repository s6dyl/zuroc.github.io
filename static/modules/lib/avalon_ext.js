define('lib/avalon_ext', function(require, exports, module){ // Generated by CoffeeScript 1.8.0
avalon.filters.txt2html = $.txt2html;

$.fn.ajax_submit = function(url, view, callback, failed) {
  var disable, errtip, form, o, submit;
  form = this[0];
  if (form.tagName === "FORM") {
    form = $(form);
  } else {
    form = $(form).parents('form');
  }
  form[0].errtip = errtip = form[0].errtip || $.errtip(form);
  form.find('input').each(function() {
    return this.value = this.value;
  });
  submit = form.find('input[type=submit]');
  disable = 'ui-button-disable';
  submit.addClass(disable);
  o = view.o;
  $.postJSON1(url, o.$model || o, function(r) {
    submit.removeClass(disable);
    errtip.reset();
    if (r.err) {
      errtip.set(r.err);
      return typeof failed === "function" ? failed(r.err) : void 0;
    } else {
      return callback(r);
    }
  });
  return false;
};

window.V = avalon.vmodels;

window.View = function(id, o, view) {
  var v;
  o['$id'] = id;
  v = avalon.define(o);
  avalon.scan();
  if (typeof view === "function") {
    view(v);
  }
  return v;
};

//# sourceMappingURL=avalon_ext.js.map
 
});